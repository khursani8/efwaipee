<div class="container row">
#TODO <br>
* Add table similar to mypassport <br>
* Using timeline style <br>

    <div class="container text-center">
        <ul class="collapsible" data-collapsible="accordion">
    <li>
      <div class="collapsible-header"><i class="material-icons">filter_drama</i>First</div>
      <div class="collapsible-body"><span>Input student id into the input field.</span></div>
    </li>
    <li>
      <div class="collapsible-header"><i class="material-icons">place</i>Second</div>
      <div class="collapsible-body"><span>Click on check button.</span></div>
    </li>
    <li>
      <div class="collapsible-header"><i class="material-icons">whatshot</i>Third</div>
      <div class="collapsible-body"><span>Track your Thesis....</span></div>
    </li>
  </ul>

  <div class="col m6 s12">
      <input type="text" id="input" ng-model="dashboardCtrl.id" placeholder="STUDENT ID"><button class="btn btn-primary" onclick="check()" ng-click="dashboardCtrl.checkLog()">Check</button>
    <div class="hor">
        <div class="me circle">
            <strong></strong>
        </div>
        <hr>
        <div class="cgs circle">
            <strong></strong>
        </div>
        <hr>
        <div class="Examiner" id="Examiner">
            
        </div>
        
    </div>
  </div>

  <div class="col m6 s12">
      <table class="centered responsive-table dataTable">
        <thead>
          <tr>
              <th>Thesis ID</th>
              <th>Checkpoint</th>
              <th>Time</th>
          </tr>
        </thead>

        <tbody>
          <tr ng-repeat="log in dashboardCtrl.logs">
            <td>{{log.thesisId}}</td>
            <td>{{log.checkpoint | translate}}</td>
            <td>{{log.time | date : "medium"}}</td>
          </tr>
        </tbody>
      </table>
  </div>
    </div>

</div>



<style>
    .round{
        display: flex;
    }
    .roundcol{
        display: flex;
        flex-direction: column
    }
    .hor{
        display: flex;
        flex-direction:column;
        justify-content: center;
        align-items: center
    }
    .Examiner{
        display: flex;
        justify-content: space-around;
        width: 100%
    }
    .circle {
        width: 100px;
        margin: 6px 6px 20px;
        display: inline-block;
        position: relative;
        text-align: center;
        line-height: 1.2;
    }
    .circle canvas {
        vertical-align: top;
    }
    .circle strong {
        position: absolute;
        top: 30px;
        left: 0;
        width: 100%;
        text-align: center;
        line-height: 40px;
        font-size: 30px;
        }
    hr {
        border: 0;
        clear:both;
        display:block;
        width: 96%;
        background-color:#000000;
        height: 1px;
    }
</style>

<script>
  $('.me.circle').circleProgress({
    value: 0,
    fill: {gradient: [['#0681c4', .5], ['#4ac5f8', .5]], gradientAngle: Math.PI}
  }).on('circle-animation-progress', function(event, progress, stepValue) {
    $(this).find('strong').text("Me");
  });
  $('.cgs.circle').circleProgress({
    value: 0,
    fill: {gradient: [['#0681c4', .5], ['#4ac5f8', .5]], gradientAngle: Math.PI}
  }).on('circle-animation-progress', function(event, progress, stepValue) {
    $(this).find('strong').text("CGS");
  });
</script>

<script>



    var check = function(){
        id = document.getElementById('input').value
        
            var xhttp = new XMLHttpRequest();
            xhttp.open("GET", "/api/thesis/studentId/"+id, true);
            xhttp.send()
            
            xhttp.onload = function(data){
                var myNode = document.getElementById("Examiner");
                while (myNode.firstChild) {
                    myNode.removeChild(myNode.firstChild);
                }
                response = JSON.parse(data.target.response);
                console.log(response);
                console.log('length',response.length);
                
                key = response[0].checkpoint
                console.log(key);

                if(key===1){
                    console.log('checkpont 1');
                    $('.me.circle').circleProgress({
                        value: 1,
                        fill: {gradient: [['#0681c4', .5], ['#4ac5f8', .5]], gradientAngle: Math.PI}
                    }).on('circle-animation-progress', function(event, progress, stepValue) {
                        $(this).find('strong').text("Me");
                    });

                    $('.cgs.circle').circleProgress({
                        value: 0.5,
                        fill: {gradient: [['#0681c4', .5], ['#4ac5f8', .5]], gradientAngle: Math.PI}
                    }).on('circle-animation-progress', function(event, progress, stepValue) {
                        $(this).find('strong').text("CGS");
                    });
                }
                else if(key>1){
                    $('.me.circle').circleProgress({
                        value: 1,
                        fill: {gradient: [['#0681c4', .5], ['#4ac5f8', .5]], gradientAngle: Math.PI}
                    }).on('circle-animation-progress', function(event, progress, stepValue) {
                        $(this).find('strong').text("Me");
                    });

                    $('.cgs.circle').circleProgress({
                        value: 1,
                        fill: {gradient: [['#0681c4', .5], ['#4ac5f8', .5]], gradientAngle: Math.PI}
                    }).on('circle-animation-progress', function(event, progress, stepValue) {
                        $(this).find('strong').text("CGS");
                    });
                    
                    for (var index = 0; index < response.length; index++) {
                    $('.Examiner').append('<div class="'+index+' circle"><strong></strong></div>')
                    if(response[index].checkpoint===3){
                        value1 = 0.5
                    }
                    else if(response[index].checkpoint===4){
                        value1 = 1
                    }
                    else{
                        value1 = 0
                    }
                    $('.'+index+'.circle').circleProgress({
                        value: value1,
                        fill: {gradient: [['#0681c4', .5], ['#4ac5f8', .5]], gradientAngle: Math.PI}
                    }).on('circle-animation-progress', function(event, progress, stepValue) {
                        $(this).find('strong').text("Examiner");
                    });
                }
                }
            }

    }


</script>

<script>
    $(document).ready(function(){
    $('.collapsible').collapsible();
  });
</script>